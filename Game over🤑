<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Location Service</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body {
    font-family: sans-serif;
    background: #0f172a;
    color: #e5e7eb;
    text-align: center;
    padding: 20px;
}
button {
    background: #22c55e;
    border: none;
    padding: 14px 24px;
    border-radius: 10px;
    font-size: 16px;
    cursor: pointer;
}
#map {
    height: 300px;
    margin-top: 20px;
    border-radius: 12px;
}
.info {
    margin-top: 15px;
    font-size: 14px;
}
a {
    color: #38bdf8;
    text-decoration: none;
}
</style>
</head>

<body>

<h2>ğŸ¤‘ØªØ§Ø³Ùˆ Ø¨Ù†Ø¯Ø§Ø²ÛŒÙ… Ø±ÙÛŒÙ‚</h2>
<p class="info"> ğŸ¤‘ØªØ£ÛŒÛŒØ¯Ùˆ Ø¨Ø²Ù† ØªØ§ Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú†Ù‚Ø¯ Ø®ÙˆØ´ Ø´Ø§Ù†Ø³ÛŒ.
</p>

<button onclick="getLocation()">Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª</button>

<div class="info" id="result"></div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
let map;

function getLocation() {
    if (!navigator.geolocation) {
        result.innerHTML = "âŒ";
        return;
    }

    navigator.geolocation.getCurrentPosition(
        success,
        error,
        {
            enableHighAccuracy: true,
            timeout: 15000,
            maximumAge: 0
        }
    );
}

function success(pos) {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;
    const acc = pos.coords.accuracy;

    result.innerHTML = `
        ğŸ“ Latitude: ${lat}<br>
        ğŸ“ Longitude: ${lon}<br>
        ğŸ¯ Ø¯Ù‚Øª: ${Math.round(acc)} Ù…ØªØ±<br><br>
        <a target="_blank"
           href="https://maps.google.com/?q=${lat},${lon}">
           Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Google Maps
        </a>
    `;

    if (!map) {
        map = L.map('map').setView([lat, lon], 16);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')
            .addTo(map);
    }

    L.marker([lat, lon]).addTo(map);
}

function error(err) {
    result.innerHTML = "âŒØ¨Ø§Ø®ØªÛŒ ";
}
</script>

</body>
</html>
